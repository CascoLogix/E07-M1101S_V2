/******************************************************************************/
//	WDT.c
//  
//	 Created on: Jan 21, 2015
//	     Author: Clint Stevenson
//
/******************************************************************************/


/******************************************************************************/
//	Includes
/******************************************************************************/
#include <WDT.h>
#include <callback.h>
/******************************************************************************/
//	End Includes


/******************************************************************************/
//	Defines
/******************************************************************************/
//Put defines here
/******************************************************************************/
/*                                                                            */
/*	Base address and bit definitions needed by WDT							  */
/*                                                                            */
/******************************************************************************/
#if defined (__MSP430_HAS_WDT__)
#if defined (__MSP430G2553)
#define WDT_PERIPHERAL_BASE_ADDRESS										(0x0120)

#endif /* Device selection */
#endif /* defined (__MSP430_HAS_WDT__) */
/******************************************************************************/
/*                                                                            */
/*	END: Base address and bit definitions needed by WDT						  */
/*                                                                            */
/******************************************************************************/


/******************************************************************************/
/*                                                                            */
/*	WDT																	  */
/*                                                                            */
/******************************************************************************/
#if defined (__MSP430_HAS_WDT__)
// WDT peripheral control register address offsets
#define WDT_CONTROL_REGISTER_ADDRESS_OFFSET								(0x0000)

#endif /* defined (__MSP430_HAS_WDT__) */
/******************************************************************************/
/*                                                                            */
/*	END: WDT																  */
/*                                                                            */
/******************************************************************************/
/******************************************************************************/
//	End Defines


/******************************************************************************/
//	Constant Struct Overlay Declarations
/******************************************************************************/
/******************************************************************************/
/*                                                                            */
/*	WDT Struct Overlay Declaration 											  */
/*                                                                            */
/******************************************************************************/
#if defined (__MSP430_HAS_WDT__)
// Peripheral Control
// Declare pointer to struct overlay for the WDT peripheral
WDT_t volatile * const p_WDT =
		(WDT_t *) WDT_PERIPHERAL_BASE_ADDRESS;

#endif /* defined (__MSP430_HAS_WDT__) */
/******************************************************************************/
/*                                                                            */
/*	END: WDT Struct Overlay Declaration										  */
/*                                                                            */
/******************************************************************************/
/******************************************************************************/
//	END: Struct Overlay Declarations for Peripheral Register Access


/******************************************************************************/
//	Constant Declarations
/******************************************************************************/
//Put Constant Declarations here
/******************************************************************************/
//	End Constant Declarations


/******************************************************************************/
//	Variable Declarations
/******************************************************************************/
//Put Variable Declarations here
functionPointer_t WDT_callback;
uint8_t WDT_LPM_bits;
/******************************************************************************/
//	End Variable Declarations


/******************************************************************************/
//	Function Prototypes
/******************************************************************************/
//Put function prototypes here
/******************************************************************************/
//	End Function Prototypes


/******************************************************************************/
//	Function Definitions
/******************************************************************************/
//Put function definitions here
void WDT_init (void)
{

}


void WDT_function (uint16_t param1, uint8_t param2)
{

}


#pragma vector = WDT_VECTOR
__interrupt void WDT_ISR (void)
{
	if(WDT_callback != 0)
	{
		WDT_callback();
	}

	__bic_SR_register_on_exit(WDT_LPM_bits);
}
/******************************************************************************/
//	End Function Definitions
